{
  "rules": {
    "users": {
      "$uid": {
        // Kullanıcı kendi verisini okuyabilir, Admin herkesi okuyabilir
        ".read": "auth != null && ($uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')",
        
        // Kullanıcı sadece ilk kayıtta yazabilir, sonra sadece Admin düzenleyebilir
        ".write": "auth != null && ($uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')"
      },
      // Admin listeyi görebilir (indeksleme için)
      ".indexOn": ["role", "status"]
    }
  }
}